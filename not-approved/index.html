<title>Batcher | Blacklisted</title>
<style>
        @font-face {
  font-family: 'Montserrat';
  src: url('https://cdn.glitch.global/9899cd76-e243-45ee-a91c-43145f21a370/Montserrat-VariableFont_wght.ttf');
       url('https://cdn.glitch.global/9899cd76-e243-45ee-a91c-43145f21a370/Montserrat-VariableFont_wght.ttf') format('ttf')
  }
        @font-face {
  font-family: 'Gothic';
  src: url('https://cdn.glitch.global/645b86d7-c9f6-4b12-8c3c-91170451c511/NanumGothic-Regular.ttf');
       url('https://cdn.glitch.global/645b86d7-c9f6-4b12-8c3c-91170451c511/NanumGothic-Regular.ttf') format('ttf')
  }
        .mainbody {
                font-family: 'Montserrat', sans-serif;
        }
        body {
                font-family: 'Gothic', sans-serif;
        }
        button {
                background: #B6CFCC;
                color: black;
                border-radius: 3px;
                border-width: thin;
                cursor: pointer;
        }
.banneddiv {
border-color: black;
border-width: thin;
border-style: solid;
width: 100%;
height: 80%;
text-align: center;
}
</style>
<div class="mainbody">
        <h1 style="color: #3F4645;">Batcher AI <span style="color:white;font-weight:800;background:blue;border-radius:8px;padding: 3px;" title="Your account is verified on Batcher!" id="verifiedbadge" hidden>Verified</span></h1>
        <input placeholder="Enter command here" id="cmdinput" style="width:220px;">
        <button onclick="sendCommand()" disabled>Submit</button>
</div>
<hr>
<div class="banneddiv">
<h1>You have been blacklisted from using Batcher.</h1>
<p>If you belive this was a mistake or would like more information about this ban, please contact @sh4dyy. on Discord</p>
<div id="appealdiv">
        <input id="usernameinput" placeholder="Batcher username here"/> <input id="discordinput" placeholder="Discord username here"/> <input id="appealinput" placeholder="Appeal reason here"/> <button onclick="submitAppeal()">Submit appeal</button>
</div>
</div>

<script>

var storage = localStorage
var usernameinp = document.getElementById("usernameinput")
var discordinp = document.getElementById("discordinput")
var appealinp = document.getElementById("appealinput")
const token = storage.getItem("batcher-token")


const serverURL = 'https://batcherbackend.codingmadnessyt.repl.co/'
async function request(url, method, body) {
  let data = {
    method: method,
        headers: {
            "cache": "no-cache",
            "Content-Type": "application/json"
        }
  };
  if(body){
        if (typeof body == "object" && body instanceof FormData == false) {
            body = JSON.stringify(body);
        }
    data.body = body;
  }
    let res = await fetch(serverURL + url, data);
  return [res.status, await res.text()];
}

        

        
function submitAppeal() {
if (usernameinp.length < 1) {
alert("Invalid username");
} else if (discordinp.length < 1) {
alert("Invalid discord");
} else if (appealinp.length < 11) {
alert("Appeal must be more than 10 characters long.");
} else {

localStorage.setItem("AppealSent", "true");
var rrequest = new XMLHttpRequest();
rrequest.open("POST", "https://discord.com/api/webhooks/1126241777347739708/c0V48ND61FTWZP34FrIAtmyYDUN4oskWHkSnlxAmw2lsrfOcy7IxJHUknWtbGeEFpmwL");

rrequest.setRequestHeader('Content-type', 'application/json');

var main = {
  title: "New appeal",
  description: "A new appeal was sent from a banned user.",
  color: hexToDecimal("#A2EE50")
}
var info = {
  title: "Appeal information:",
  description: "Batcher username: " + usernameinp.value + "\nDiscord username: " + discordinp.value + "\nAppeal reason: " + appealinp.value,
  color: hexToDecimal("#A2EE50")
}
var params = {
  username: "Batcher Logs",
  embeds: [ main, info ]
}

rrequest.send(JSON.stringify(params));

function hexToDecimal(hex) {
  return parseInt(hex.replace("#",""), 16)
}
alert("Appeal Sent");
window.location.reload();
}
}

function addScript(src) {
  let myScript = document.createElement("script");
myScript.setAttribute("src", src);
document.body.appendChild(myScript);
} 

async function getStart() {
        let [code, response] = await request('info', 'PUT', {
                token: token
        });
        if(code == 200) {
                if (response.banned == true) {
                        document.getElementById("appealdiv").hidden = false;
                } else {
                        document.getElementById("appealdiv").hidden = true;
                }
        }
}
        
setTimeout(function() {
        if (localStorage.getItem("AppealSent") == null) {
        document.getElementById("appealdiv").hidden = false;
} else {
        document.getElementById("appealdiv").hidden = true;
}
}, 1000);

        getStart();
        
</script>
